<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Validar Archivo CSV</title>
    {% load static %}
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">

<div class="w-full max-w-lg ">

    <h2 class="text-center text-2xl font-bold mb-6 text-gray-800">
        Validar Archivo CSV
    </h2>
    
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}
        <div class="border-2 bg-white rounded-xl p-10 text-center">

            <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png"
                 class="w-14 mx-auto mb-4 opacity-80" alt="icono carpeta">

            <label for="fileInput"
                   class="inline-block px-6 py-3 bg-blue-600  text-white rounded-full cursor-pointer font-semibold shadow-md hover:opacity-70 transition">
                Seleccionar archivo CSV
            </label>
            <input type="file" id="fileInput" name="file"
                   accept=".csv,.txt"
                   class="hidden"
                   onchange="mostrarNombre(this)" />

            <p id="fileName" class="text-gray-600 mt-3">
                Ningún archivo seleccionado
            </p>
        </div>
        <div class="flex gap-4 justify-center">
                <button type="submit"
                    class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:opacity-70 transition">
                    Validar Archivo
                </button>
                {% if errors or success %}
                <a href=""
                    class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:opacity-70 transition">
                    Recargar App
                </a>
                {% endif %}
            </div>
    </form>
  
    {% if errors %}
        <div class="mt-6 bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-lg">
            <h4 class="font-bold mb-2">Errores:</h4>
            <ul class="list-disc pl-6">
                {% for e in errors %}
                <li>{{ e }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if success %}
        <div class="mt-6 bg-green-100 border border-green-300 text-green-700 px-4 py-3 rounded-lg">
            El archivo fue validado correctamente
        </div>
    {% endif %}


</div>

<script>
    function mostrarNombre(input) {
        const label = document.getElementById("fileName");
        label.innerText = input.files.length > 0
            ? input.files[0].name
            : "Ningún archivo seleccionado";
    }
</script>

</body>
</html>
